With Substitution Indexing も使うパターン
HT に追記していく。追記の時に RefSet にも載せる。

使い分けは

Substitution
  :host, user-agent など滅多に変わらないもの
  cookie, date など変わるけどどうせ使いまわせないもの

Incremental
  :path, referer など変わるけど使いまわせる率が高いもの

[1]

HeaderSet
  :scheme: https
  :host: jxck.io
  :path: /
  :method: GET
  user-agent: http2cat
  cookie: xxxxxxx1
  x-hello: world

Encode
  indexed header index=1
  literal header with substitution indexing, name index=2 value="jxck.io"
  indexed header index=3
  indexed header index=4
  literal header with substitution indexing, name index=12 vaelu="http2cat"
  literal header with substitution indexing, name index=9 vaelu="xxxxxxx1"
  literal header with incremental indexing, new name="x-hello" value="world"

RefSet
  :scheme: https
  :host: jxck.io
  :path: /
  :method: GET
  user-agent: http2cat
  cookie: xxxxxxx1
  x-hello: world

HT
  | 2  | :host        | jxck.io    |
  | 9  | cookie       | xxxxxxx1   |
  | 12 | :user-agent  | http2cat   |
  | 30 | x-hello      | world      |
  +----+--------------+------------+

[2]

HeaderSet
  :scheme: https
  :host: jxck.io
  :path: /labs/http2cat (changed)
  :method: GET
  user-agent: http2cat
  cookie: xxxxxxx2 (changed)
  (x-hello: world) (removed)

Encode
  indexed header index=3 removal from reference set
  literal header with incremental indexing, name index=3 value="/labs/http2cat"
  indexed header index=9 removal from reference set
  literal header with substitution indexing, name index=9 vaelu="xxxxxxx2"
  indexed header index=30 removal from reference set

RefSet
  :scheme: https
  :host: jxck.io
  :path: /labs/http2cat
  :method: GET
  user-agent: http2cat
  cookie: xxxxxxx2

HT
  | 2  | :host        | jxck.io    |
  | 9  | cookie       | xxxxxxx2   |
  | 12 | :user-agent  | http2cat   |
  | 30 | x-hello      | world      |
  | 31 | :path        | /labs/http2cat |
  +----+--------------+------------+
